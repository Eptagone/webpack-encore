#!/usr/bin/env node
"use strict";var K=Object.create;var g=Object.defineProperty;var Y=Object.getOwnPropertyDescriptor;var X=Object.getOwnPropertyNames;var z=Object.getPrototypeOf,Q=Object.prototype.hasOwnProperty;var Z=(e,t)=>{for(var r in t)g(e,r,{get:t[r],enumerable:!0})},P=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of X(t))!Q.call(e,o)&&o!==r&&g(e,o,{get:()=>t[o],enumerable:!(n=Y(t,o))||n.enumerable});return e};var l=(e,t,r)=>(r=e!=null?K(z(e)):{},P(t||!e||!e.__esModule?g(r,"default",{value:e,enumerable:!0}):r,e)),ee=e=>P(g({},"__esModule",{value:!0}),e);var ke={};Z(ke,{default:()=>ve});module.exports=ee(ke);var re=()=>typeof document>"u"?new URL(`file:${__filename}`).href:document.currentScript&&document.currentScript.src||new URL("main.js",document.baseURI).href,p=re();var B=require("module"),a=l(require("picocolors"),1),W=l(require("yargs-parser"),1);var D=l(require("@babel/core"),1),y=l(require("path"),1);var C=l(require("fs"),1),d=l(require("path"),1),j=require("url");function S(e){return ne("package.json",{cwd:e.cwd})}function te(e){return e instanceof URL?(0,j.fileURLToPath)(e):e}function ne(e,t={}){t.cwd??(t.cwd=process.cwd());let r=d.default.resolve(te(t.cwd)||""),{root:n}=d.default.parse(r);for(;r&&r!==n;){let o=d.default.isAbsolute(e)?e:d.default.join(r,e);try{let s=C.default.statSync(o,{throwIfNoEntry:!1});if(s&&s.isFile())return o}catch{}r=d.default.dirname(r)}}var k=class{constructor(){this.command=null;this.context=null;this.isValidCommand=!1;this.environment=process.env.NODE_ENV?process.env.NODE_ENV:"dev";this.useDevServer=!1;this.devServerHttps=null;this.devServerFinalIsHttps=null;this.devServerHost=null;this.devServerPort=null;this.devServerPublic=null;this.devServerKeepPublicPath=!1;this.outputJson=!1;this.profile=!1;this.babelRcFileExists=null;this.helpRequested=!1;this.verbose=!1}},R=k;function $(e,t){let r=new R;switch(r.command=e._[0]?.toString(),r.command){case"dev":r.isValidCommand=!0,r.environment="dev",r.verbose=!0;break;case"production":case"prod":r.isValidCommand=!0,r.environment="production",r.verbose=!1;break;case"dev-server":r.isValidCommand=!0,r.environment="dev",r.verbose=!0,r.useDevServer=!0,r.devServerKeepPublicPath=e.keepPublicPath||!1,(e.https||e.serverType==="https")&&(r.devServerHttps=!0),typeof e.public=="string"&&(r.devServerPublic=e.public),r.devServerHost=e.host?e.host:"localhost",r.devServerPort=e.port?e.port:"8080";break}if(r.context=e.context,typeof r.context>"u"){let o=S({cwd:t});if(!o)throw new Error("Cannot determine webpack context. (Are you executing webpack from a directory outside of your project?). Try passing the --context option.");r.context=y.default.dirname(o)}(e.h||e.help)&&(r.helpRequested=!0),(e.j||e.json)&&(r.outputJson=!0),e.profile&&(r.profile=!0);let n=D.default.loadPartialConfig({root:t,cwd:t,filename:y.default.join(t,"webpack.config.js")});return r.babelRcFileExists=n?.hasFilesystemConfig()??!1,r}var oe={get runtimeConfig(){return globalThis.WEBPACK_ENCORE_RUNTIME_CONFIG||null},set runtimeConfig(e){globalThis.WEBPACK_ENCORE_RUNTIME_CONFIG=e}},_=oe;var h=l(require("fs"),1),F=require("module"),c=l(require("picocolors"),1),w=l(require("semver"),1);var E={name:"@symfony/webpack-encore",version:"5.1.0",description:"Webpack Encore is a simpler way to integrate Webpack into your application",type:"module",packageManager:"pnpm@10.8.1",main:"./dist/cjs/index.cjs",module:"./dist/esm/index.js",types:"./dist/esm/index.d.ts",scripts:{build:"tsup",test:"pnpm run test:main && pnpm run test:persistent-cache","test:main":"mocha --reporter spec test --recursive --ignore test/persistent-cache/*","test:persistent-cache":"tsx run-persistent-tests",lint:"eslint lib test index.js .eslintrc.js --report-unused-disable-directives --max-warnings=0","travis:lint":"pnpm run lint"},bin:{encore:"dist/bin/encore.cjs"},exports:{".":{import:{import:"./dist/esm/index.js",types:"./dist/esm/index.d.ts"},require:{require:"./dist/cjs/index.cjs",types:"./dist/cjs/index.d.cts"}}},files:["lib/","bin/","index.js"],repository:{type:"git",url:"git+https://github.com/symfony/webpack-encore.git"},author:"Ryan Weaver <ryan@knpuniversity.com>",license:"MIT",bugs:{url:"https://github.com/symfony/webpack-encore/issues"},engines:{node:"^18.12.0 || ^20.0.0 || >=22.0"},homepage:"https://github.com/symfony/webpack-encore",dependencies:{"@nuxt/friendly-errors-webpack-plugin":"^2.5.1","babel-loader":"^9.1.3","css-loader":"^7.1.0","css-minimizer-webpack-plugin":"^7.0.0","fastest-levenshtein":"^1.0.16","mini-css-extract-plugin":"^2.6.0",picocolors:"^1.1.1","pretty-error":"^4.0.0","resolve-url-loader":"^5.0.0",semver:"^7.5.2","style-loader":"^3.3.0",tapable:"^2.2.1","terser-webpack-plugin":"^5.3.0",tmp:"^0.2.1","yargs-parser":"^21.0.0"},devDependencies:{"@babel/core":"^7.17.0","@babel/eslint-parser":"^7.17.0","@babel/plugin-transform-react-jsx":"^7.12.11","@babel/preset-env":"^7.16.0","@babel/preset-react":"^7.9.0","@babel/preset-typescript":"^7.0.0","@eslint/js":"^9.23.0","@hotwired/stimulus":"^3.0.0","@stylistic/eslint-plugin":"^4.2.0","@symfony/mock-module":"file:fixtures/stimulus/mock-module","@symfony/stimulus-bridge":"^3.0.0 || ^4.0.0","@types/babel__core":"^7.20.5","@types/chai":"^5.2.1","@types/chai-fs":"^2.0.5","@types/chai-subset":"^1.3.6","@types/fs-extra":"^11.0.4","@types/http-server":"^0.12.4","@types/mocha":"^10.0.10","@types/node":"^18.0.0 || ^20.0.0 || ^22.0.0","@types/semver":"^7.7.0","@types/sinon":"^17.0.4","@types/tmp":"^0.2.6","@types/yargs-parser":"^21.0.3","@vue/babel-helper-vue-jsx-merge-props":"^1.0.0","@vue/babel-plugin-jsx":"^1.0.0","@vue/babel-preset-jsx":"^1.0.0","@vue/compiler-sfc":"^3.0.2",autoprefixer:"^10.2.0",chai:"^4.2.0","chai-fs":"^2.0.0","chai-subset":"^1.6.0","core-js":"^3.0.0",eslint:"^9.23.0","eslint-plugin-jsdoc":"^50.6.9","eslint-plugin-n":"^17.17.0","eslint-plugin-tsdoc":"^0.4.0","file-loader":"^6.0.0","fork-ts-checker-webpack-plugin":"^7.0.0 || ^8.0.0 || ^9.0.0","fs-extra":"^10.0.0",globals:"^16.0.0",handlebars:"^4.7.7","handlebars-loader":"^1.7.0","http-server":"^14.1.0",less:"^4.0.0","less-loader":"^11.0.0 || ^12.2.0",mocha:"^11.0.0",postcss:"^8.4.31","postcss-loader":"^7.0.0 || ^8.1.0",preact:"^10.5.0","preact-compat":"^3.17.0",puppeteer:"^24.6.0",react:"^18.0.0","react-dom":"^18.0.0",sass:"^1.17.0","sass-loader":"^16.0.1",sinon:"^14.0.0","strip-ansi":"^6.0.0",stylus:"^0.63.0","stylus-loader":"^7.0.0 || ^8.1.0",svelte:"^3.50.0 || ^4.2.2","svelte-loader":"^3.1.0",terser:"^5.39.0","ts-loader":"^9.0.0",tsup:"^8.4.0",tsx:"^4.19.3",typescript:"^5.0.0","typescript-eslint":"^8.29.0",vue:"^3.2.14","vue-loader":"^17.0.0",webpack:"^5.76","webpack-cli":"^5.1.4","webpack-dev-server":"^5.2.1","webpack-manifest-plugin":"^5.0.1","webpack-notifier":"^1.15.0","webpack-sources":"^3.2.3"},peerDependencies:{"@babel/core":"^7.17.0","@babel/plugin-transform-react-jsx":"^7.12.11","@babel/preset-env":"^7.16.0","@babel/preset-react":"^7.9.0","@babel/preset-typescript":"^7.0.0","@symfony/stimulus-bridge":"^3.0.0 || ^4.0.0","@vue/babel-helper-vue-jsx-merge-props":"^1.0.0","@vue/babel-plugin-jsx":"^1.0.0","@vue/babel-preset-jsx":"^1.0.0","@vue/compiler-sfc":"^2.6 || ^3.0.2","file-loader":"^6.0.0","fork-ts-checker-webpack-plugin":"^7.0.0 || ^8.0.0 || ^9.0.0",handlebars:"^4.7.7","handlebars-loader":"^1.7.0",less:"^4.0.0","less-loader":"^11.0.0 || ^12.2.0",postcss:"^8.3.0","postcss-loader":"^7.0.0 || ^8.1.0",sass:"^1.17.0","sass-loader":"^16.0.1","stylus-loader":"^7.0.0 || ^8.1.0","ts-loader":"^9.0.0",typescript:"^5.0.0",vue:"^3.2.14","vue-loader":"^17.0.0",webpack:"^5.72","webpack-cli":"^5.1.4","webpack-notifier":"^1.15.0"},peerDependenciesMeta:{"@babel/core":{optional:!1},"@babel/plugin-transform-react-jsx":{optional:!0},"@babel/preset-env":{optional:!1},"@babel/preset-react":{optional:!0},"@babel/preset-typescript":{optional:!0},"@symfony/stimulus-bridge":{optional:!0},"@vue/babel-helper-vue-jsx-merge-props":{optional:!0},"@vue/babel-plugin-jsx":{optional:!0},"@vue/babel-preset-jsx":{optional:!0},"@vue/compiler-sfc":{optional:!0},"file-loader":{optional:!0},"fork-ts-checker-webpack-plugin":{optional:!0},handlebars:{optional:!0},"handlebars-loader":{optional:!0},less:{optional:!0},"less-loader":{optional:!0},postcss:{optional:!0},"postcss-loader":{optional:!0},sass:{optional:!0},"sass-loader":{optional:!0},"stylus-loader":{optional:!0},"ts-loader":{optional:!0},typescript:{optional:!0},vue:{optional:!0},"vue-loader":{optional:!0},webpack:{optional:!1},"webpack-cli":{optional:!1},"webpack-dev-server":{optional:!0},"webpack-notifier":{optional:!0}}};var m=l(require("picocolors"),1),ae={isVerbose:!1,quiet:!1},ie={debug:[],recommendation:[],warning:[],deprecation:[]},V=Object.assign({},ae);function ce(e){V.quiet||console.log(e)}function A(e){ie.warning.push(e),ce(`${m.default.bgYellow(m.default.black(" WARNING "))} ${m.default.yellow(e)}`)}function T(e=!0){V.quiet=e}var L=(0,F.createRequire)(p);function q(e,t){let r=N(e,t);if(r)throw new Error(`
${r.message}
  ${r.installCommand}
`);let n=de(e);for(let o of n)A(o)}function le(e){let t=h.default.existsSync("pnpm-lock.yaml"),r=h.default.existsSync("yarn.lock"),n=e.map(o=>{let s=o[0];if(!s)throw new Error("Empty packageConfig passed to getInstallCommand().");if(typeof s.version>"u")return s.name;let i=s.version;return i.includes("||")&&(i=i.split("|").pop().trim()),`${s.name}@${i}`});return t?c.default.yellow(`pnpm add ${n.join(" ")} --save-dev`):r?c.default.yellow(`yarn add ${n.join(" ")} --dev`):c.default.yellow(`npm install ${n.join(" ")} --save-dev`)}function pe(e){try{return L.resolve(e.name),!0}catch{return!1}}function ue(e){try{return L(`${e}/package.json`).version}catch{return null}}function N(e,t=null){let r=[];for(let i of e)Array.isArray(i)||(i=[i]),i.some(pe)||r.push(i);if(r.length===0)return;let o=`Install ${r.map(function(i){let f=i.map(v=>c.default.green(v.name)),b=f[0];if(f.length>1){let v=f.slice(1);b=`${b} (or ${v.join(" or ")})`}return b}).join(" & ")}`;t&&(o+=` to use ${c.default.green(t)}`);let s=le(r);return{message:o,installCommand:s}}function de(e){let t=r=>{if(Array.isArray(r)){let o=[];for(let s of r)o=o.concat(t(s));return o}if(typeof r.version>"u")return[];let n=ue(r.name);return n===null?[]:w.default.satisfies(n,r.version)?[]:w.default.gtr(n,r.version)?[`Webpack Encore requires version ${c.default.green(r.version)} of ${c.default.green(r.name)}. Your version ${c.default.green(n)} is too new. The related feature *may* still work properly. If you have issues, try downgrading the library, or upgrading Encore.`]:[`Webpack Encore requires version ${c.default.green(r.version)} of ${c.default.green(r.name)}, but your version (${c.default.green(n)}) is too old. The related feature will probably *not* work correctly.`]};return e.flatMap(t)}function H(e){function t(r){if(Array.isArray(r))return r.map(t);let n=Object.assign({},r);if(r.enforce_version){let s=E.devDependencies[r.name];if(!s)throw new Error(`Could not find package ${r.name}`);n.version=s,delete n.enforce_version}return n}return e.map(t)}var M={sass:{method:"enableSassLoader()",packages:[{name:"sass-loader",enforce_version:!0},[{name:"sass"},{name:"sass-embedded"},{name:"node-sass"}]],description:"load Sass files"},less:{method:"enableLessLoader()",packages:[{name:"less-loader",enforce_version:!0}],description:"load LESS files"},stylus:{method:"enableStylusLoader()",packages:[{name:"stylus-loader",enforce_version:!0}],description:"load Stylus files"},postcss:{method:"enablePostCssLoader()",packages:[{name:"postcss-loader",enforce_version:!0}],description:"process through PostCSS"},react:{method:"enableReactPreset()",packages:[{name:"@babel/preset-react",enforce_version:!0}],description:"process React JS files"},preact:{method:"enablePreactPreset()",packages:[{name:"@babel/plugin-transform-react-jsx",enforce_version:!0}],description:"process Preact JS files"},typescript:{method:"enableTypeScriptLoader()",packages:[{name:"typescript"},{name:"ts-loader",enforce_version:!0}],description:"process TypeScript files"},forkedtypecheck:{method:"enableForkedTypeScriptTypesChecking()",packages:[{name:"typescript"},{name:"ts-loader",enforce_version:!0},{name:"fork-ts-checker-webpack-plugin",enforce_version:!0}],description:"check TypeScript types in a separate process"},"typescript-babel":{method:"enableBabelTypeScriptPreset",packages:[{name:"typescript"},{name:"@babel/preset-typescript",enforce_version:!0}],description:"process TypeScript files with Babel"},vue3:{method:"enableVueLoader()",packages:[{name:"vue",enforce_version:!0},{name:"vue-loader",enforce_version:!0},{name:"@vue/compiler-sfc"}],description:"load Vue files"},"vue-jsx":{method:"enableVueLoader()",packages:[{name:"@vue/babel-preset-jsx"},{name:"@vue/babel-helper-vue-jsx-merge-props"}],description:"use Vue with JSX support"},"vue3-jsx":{method:"enableVueLoader()",packages:[{name:"@vue/babel-plugin-jsx"}],description:"use Vue with JSX support"},copy_files:{method:"copyFiles()",packages:[{name:"file-loader",enforce_version:!0}],description:"Copy files"},notifier:{method:"enableBuildNotifications()",packages:[{name:"webpack-notifier",enforce_version:!0}],description:"display build notifications"},handlebars:{method:"enableHandlebarsLoader()",packages:[{name:"handlebars"},{name:"handlebars-loader",enforce_version:!0}],description:"load Handlebars files"},stimulus:{method:"enableStimulusBridge()",packages:[{name:"@symfony/stimulus-bridge",enforce_version:!0}],description:"enable Stimulus bridge"},svelte:{method:"enableSvelte()",packages:[{name:"svelte",enforce_version:!0},{name:"svelte-loader",enforce_version:!0}],description:"process Svelte JS files"},"webpack-dev-server":{method:"configureDevServerOptions()",packages:[{name:"webpack-dev-server"}],description:"run the Webpack development server"}};function me(e){if(!M[e])throw new Error(`Unknown feature ${e}`);return M[e]}function O(e,t=null){let r=me(e);q(H(r.packages),t||r.method)}var U=(0,B.createRequire)(p),u=$((0,W.default)(process.argv.slice(2)),process.cwd());_.runtimeConfig=u;u.outputJson&&T();process.argv.splice(2,1);var be=new Set(["--keep-public-path"]);process.argv=process.argv.filter(e=>!be.has(e));var J=process.argv.indexOf("--public");J!==-1&&process.argv.splice(J,2);u.isValidCommand||(u.command&&(console.log(a.default.bgRed(a.default.white(`Invalid command "${u.command}"`))),console.log()),G(),process.exit(1));u.helpRequested&&G();var x;if(u.useDevServer){try{O("webpack-dev-server","the webpack Development Server")}catch(e){console.log(e),process.exit(1)}console.log("Running webpack-dev-server ..."),console.log(),x=U("webpack-dev-server/bin/webpack-dev-server")}else u.outputJson||(console.log("Running webpack ..."),console.log()),x=U("webpack/bin/webpack");function G(){let e=["dev","prod","production","dev-server"];console.log(`usage ${a.default.green("encore")} [${e.map(t=>a.default.green(t)).join("|")}]`),console.log(),console.log("encore is a thin executable around the webpack or webpack-dev-server executables"),console.log(),console.log("Commands:"),console.log(`    ${a.default.green("dev")}        : runs webpack for development`),console.log("       - Supports any webpack options (e.g. --watch)"),console.log(),console.log(`    ${a.default.green("dev-server")} : runs webpack-dev-server`),console.log(`       - ${a.default.yellow("--host")} The hostname/ip address the webpack-dev-server will bind to`),console.log(`       - ${a.default.yellow("--port")} The port the webpack-dev-server will bind to`),console.log(`       - ${a.default.yellow("--keep-public-path")} Do not change the public path (it is usually prefixed by the dev server URL)`),console.log(`       - ${a.default.yellow("--public")} The public url for entry asset in entrypoints.json`),console.log("       - Supports any webpack-dev-server options"),console.log(),console.log(`    ${a.default.green("production")} : runs webpack for production`),console.log("       - Supports any webpack options (e.g. --watch)"),console.log(),console.log(a.default.yellow("    encore dev --watch")),console.log(a.default.yellow("    encore dev-server")),console.log(a.default.yellow("    encore production")),console.log()}var ve=x;
